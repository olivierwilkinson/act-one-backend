# Migration `20200828210125-add-play`

This migration has been generated by olivierwilkinson at 8/28/2020, 10:01:25 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `actone`.`Play` (
`id` int  NOT NULL  AUTO_INCREMENT,
`title` varchar(191)  NOT NULL ,
`description` varchar(191)  NOT NULL ,
`image` varchar(191)  NOT NULL ,
`imageLicenseUrl` varchar(191)  NOT NULL ,
`imageLicenseCode` varchar(191)  NOT NULL ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `actone`.`Scene` (
`id` int  NOT NULL  AUTO_INCREMENT,
`playId` int  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `actone`.`Line` (
`id` int  NOT NULL  AUTO_INCREMENT,
`player` varchar(191)  NOT NULL ,
`sceneId` int  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `actone`.`LineRow` (
`id` int  NOT NULL  AUTO_INCREMENT,
`number` int  ,
`text` varchar(191)  NOT NULL ,
`lineId` int  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `actone`.`Scene` ADD FOREIGN KEY (`playId`) REFERENCES `actone`.`Play`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `actone`.`Line` ADD FOREIGN KEY (`sceneId`) REFERENCES `actone`.`Scene`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `actone`.`LineRow` ADD FOREIGN KEY (`lineId`) REFERENCES `actone`.`Line`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `actone`.`User` RENAME INDEX `User.email` TO `User.email_unique`
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200802112125-update-profile-for-google-user-information..20200828210125-add-play
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -17,4 +17,37 @@
   name        String?
   picture     String?
   googleId    String?
 }
+
+model Play {
+  id               Int     @id @default(autoincrement())
+  title            String
+  description      String
+  image            String
+  imageLicenseUrl  String
+  imageLicenseCode String
+  scenes           Scene[]
+}
+
+model Scene {
+  id     Int    @id @default(autoincrement())
+  lines  Line[]
+  Play   Play?  @relation(fields: [playId], references: [id])
+  playId Int?
+}
+
+model Line {
+  id       Int       @id @default(autoincrement())
+  player   String
+  lineRows LineRow[]
+  Scene    Scene?    @relation(fields: [sceneId], references: [id])
+  sceneId  Int?
+}
+
+model LineRow {
+  id     Int    @id @default(autoincrement())
+  number Int?
+  text   String
+  Line   Line?  @relation(fields: [lineId], references: [id])
+  lineId Int?
+}
```


